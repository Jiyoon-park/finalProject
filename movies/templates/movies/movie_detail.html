{% extends 'base.html' %}

{% load bootstrap4 %}

{% block title %}movie-datail{% endblock %}

{% block CSS %}
{% load static %}
<!-- <link rel="stylesheet" type="text/css" href="{% static 'movies/detail.css' %}" /> -->
{% endblock %}

{% block body %}
<style>
  header {
    padding-top: 20%;
    background-image: url('https://image.tmdb.org/t/p/original/{{ movie.backdrop_path }}');
    background-position: center;
    background-size: cover;
    color: #fff;
    text-align: center;
  }

  header h1 {
    font-size: 2.5rem;
  }
</style>
  <nav>
    <div class="d-flex justify-content-between">
      <a href="{% url 'movies:index' %}"><button>Home</button></a>
      <a href="{% url 'movies:review_create' movie.pk %}"><button>Create</button></a>
    </div>
  </nav>
  <header>
    <h1>{{ movie.title }}</h1>
  </header>
  
  <div class="row">
    <section class="col-6">
      <div class="movie_info">
        <h2>plot</h2>
        <p>{{ movie.overview }}</p>
        {% for genre in movie.genres.all %}
          <button>{{ genre }}</button>
        {% endfor %}
      </div>
      <div class="recommend-movie">
        <h2>이 영화가 재밌으셨다면, TOP3(같은 장르 다른 영화3)</h2>
          <div class="reccomend-movie-list row">
            {% for same_genre in same_genres %}
            <div class="col-4">
              <img src="https://image.tmdb.org/t/p/original/{{ same_genre.poster_path}}" alt="movie-poster" style="width:100%;">
              <p>{{same_genre.title}}</p>
            </div>
            {% endfor %}
          </div>
      </div>
    </section>
    <section class="col-6">
      <div class="trailer">
        <h2>trailer</h2>
        <p>여기에 trailer</p>
      </div>
      <div class="review_list">
        <h2>REVIEW</h2>
          <table class="table">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">Title</th>
              </tr>
            </thead>
            {% for review in movie.review_set.all %}
                <tbody>
                  <tr>
                    <td>{{ forloop.counter }}</td>
                    <th scope="row"><a href ="{% url 'movies:review_detail' review.pk %}">{{ review.content }}</a></th>
                  </tr>
                </tbody>
            {% endfor %}
          </table>
      </div>
    </section>
  </div>
{% endblock %}